# 작업 계획서: face_extract 모듈 폴더 구조 정리

**작업 일시**: 2026-01-13 16:45  
**작업 목표**: `gui/_face_extract*.py` 파일들을 `gui/face_extract/` 폴더로 이동하여 face_edit과 동일한 구조로 정리

## 작업 배경
- 현재 `gui/` 폴더에 `_face_extract*.py` 파일들이 흩어져 있음
- `face_edit` 모듈은 이미 `gui/face_edit/` 폴더로 정리되어 있음
- 일관된 구조를 위해 `face_extract`도 동일한 패턴으로 정리 필요
- 코드 가독성 및 유지보수성 향상

## 현재 상태 분석

### 이동 대상 파일 목록
1. `gui/_face_extract.py` → `gui/face_extract/__init__.py` (메인 클래스)
2. `gui/_face_extract_file.py` → `gui/face_extract/file.py` (FileManagerMixin)
3. `gui/_face_extract_preview.py` → `gui/face_extract/preview.py` (PreviewManagerMixin)
4. `gui/_face_extract_canvas.py` → `gui/face_extract/canvas.py` (CanvasEventHandlerMixin)
5. `gui/_face_extract_save.py` → `gui/face_extract/save.py` (SaveManagerMixin)
6. `gui/_face_extract_params.py` → `gui/face_extract/params.py` (ParameterManagerMixin)
7. `gui/_face_extract_similar.py` → `gui/face_extract/similar.py` (SimilarFaceManagerMixin)

### 참조하는 파일 목록
1. `gui/gui.py`: `import gui._face_extract as _face_extract`
2. `gui/_face_similar.py`: `from gui._face_extract_similar import SimilarFaceManagerMixin`

## 작업 순서

### 1단계: 폴더 구조 생성
- [x] `gui/face_extract/` 폴더 생성
- [x] 폴더 구조 확인

### 2단계: 파일 이동 및 이름 변경
- [x] `_face_extract.py` → `face_extract/__init__.py` 이동 및 이름 변경
- [x] `_face_extract_file.py` → `face_extract/file.py` 이동 및 이름 변경
- [x] `_face_extract_preview.py` → `face_extract/preview.py` 이동 및 이름 변경
- [x] `_face_extract_canvas.py` → `face_extract/canvas.py` 이동 및 이름 변경
- [x] `_face_extract_save.py` → `face_extract/save.py` 이동 및 이름 변경
- [x] `_face_extract_params.py` → `face_extract/params.py` 이동 및 이름 변경
- [x] `_face_extract_similar.py` → `face_extract/similar.py` 이동 및 이름 변경

### 3단계: 내부 import 경로 수정
- [x] `face_extract/__init__.py` 내부 import 수정
  - `from gui._face_extract_file import` → `from .file import`
  - `from gui._face_extract_preview import` → `from .preview import`
  - `from gui._face_extract_canvas import` → `from .canvas import`
  - `from gui._face_extract_save import` → `from .save import`
  - `from gui._face_extract_params import` → `from .params import`
- [x] 각 Mixin 파일 내부의 상대 import 경로 확인 및 수정 (필요시)

### 4단계: 외부 참조 파일 import 경로 수정
- [x] `gui/gui.py` 수정
  - `import gui._face_extract as _face_extract` → `from gui import face_extract as _face_extract`
- [x] `gui/_face_similar.py` 수정
  - `from gui._face_extract_similar import` → `from gui.face_extract.similar import`
  - 함수 import 경로도 모두 수정 완료 (`_get_features_dir`, `_get_features_cache_filename`)

### 5단계: 기타 참조 확인
- [x] 프로젝트 전체에서 `_face_extract` 관련 import 검색
- [x] 누락된 참조가 있는지 확인 및 수정

### 6단계: 테스트 및 검증
- [x] import 오류 확인 (린터 오류 없음)
- [x] 프로그램 실행 테스트 (사용자 확인 완료)
- [x] 얼굴 추출 기능 동작 확인 (사용자 확인 완료)

### 7단계: 기존 파일 삭제
- [x] 모든 테스트 완료 후 기존 `_face_extract*.py` 파일 삭제 확인 (모든 파일 이동 완료, 기존 파일 없음)
- [x] Git 상태 확인

## 기술 사항
- Python 패키지 구조: `gui/face_extract/` 폴더에 `__init__.py` 포함
- 상대 import 사용: `from .module import` 형식
- 절대 import 사용: `from gui.face_extract.module import` 형식
- face_edit 모듈과 동일한 구조 패턴 적용

## 최종 구조

```
gui/
├── face_extract/
│   ├── __init__.py          (FaceExtractPanel)
│   ├── file.py              (FileManagerMixin)
│   ├── preview.py           (PreviewManagerMixin)
│   ├── canvas.py            (CanvasEventHandlerMixin)
│   ├── save.py              (SaveManagerMixin)
│   ├── params.py            (ParameterManagerMixin)
│   └── similar.py           (SimilarFaceManagerMixin)
└── face_edit/
    ├── __init__.py
    ├── file.py
    ├── preview.py
    ├── canvas.py
    ├── morphing.py
    ├── style.py
    └── age.py
```

## 주의 사항
- 파일 이동 시 Git 히스토리 유지를 위해 `git mv` 사용 고려
- import 경로 수정 시 오타 주의
- 모든 참조를 찾아 수정해야 함
- 테스트 완료 전까지 기존 파일 삭제 금지
- 린터 오류 확인 필수
