# 추가 리팩토링 작업계획서: preview.py 분리

## 작업 개요
`preview.py` 파일을 기능별로 분리하여 코드 가독성과 유지보수성 향상

## 대상 파일 및 규모

### preview.py 리팩토링
- **파일**: `gui/face_edit/preview.py`
- **현재 상태**: 
  - 전체 파일: 1,201줄
  - 주요 메서드:
    - `_create_preview_ui`: 약 18-206줄 (189줄)
    - `show_original_preview`: 약 207-340줄 (134줄)
    - `show_edited_preview`: 약 341-481줄 (141줄)
    - `clear_eye_region_display`: 약 482-499줄 (18줄)
    - `update_eye_region_display`: 약 500-684줄 (185줄)
    - `clear_lip_region_display`: 약 685-702줄 (18줄)
    - `update_lip_region_display`: 약 703-953줄 (251줄)
    - `clear_landmarks_display`: 약 954-1022줄 (69줄)
    - `update_face_features_display`: 약 1023-1201줄 (179줄)
- **문제점**: 단일 파일에 모든 미리보기 관련 기능이 집중되어 있음

## 작업 계획

### 목표 구조
```
gui/face_edit/
├── preview.py (메인 Mixin + 통합)
├── preview_ui.py (UI 생성 메서드)
├── preview_original.py (원본 이미지 미리보기)
├── preview_edited.py (편집된 이미지 미리보기)
└── preview_regions.py (영역 표시: 눈, 입, 랜드마크)
```

### 분리할 메서드

#### 1. preview_ui.py
- `_create_preview_ui` - 미리보기 UI 생성

#### 2. preview_original.py
- `show_original_preview` - 원본 이미지 미리보기 표시

#### 3. preview_edited.py
- `show_edited_preview` - 편집된 이미지 미리보기 표시

#### 4. preview_regions.py
- `clear_eye_region_display` - 눈 영역 표시 초기화
- `update_eye_region_display` - 눈 영역 표시 업데이트
- `clear_lip_region_display` - 입 영역 표시 초기화
- `update_lip_region_display` - 입 영역 표시 업데이트
- `clear_landmarks_display` - 랜드마크 표시 초기화
- `update_face_features_display` - 얼굴 특징 표시 업데이트

### 작업 순서
1. 각 파일 생성 및 메서드 추출
2. `preview.py`의 `PreviewManagerMixin`을 각 Mixin을 상속받도록 변경
3. import 경로 확인 및 수정
4. 테스트 및 검증

## 작업 원칙

1. **기능 보존**: 리팩토링 후에도 동일한 기능 유지
2. **점진적 진행**: 각 단계 완료 후 검증
3. **에러 처리**: 모든 예외는 로그 출력 (pass 금지)
4. **의존성 관리**: import 경로 정확히 수정
5. **백업**: 원본 파일은 `.bak` 확장자로 백업

## 주의사항

1. **Mixin 패턴 유지**: 각 파일은 Mixin 클래스로 구성
2. **상속 구조**: `PreviewManagerMixin`이 모든 하위 Mixin을 상속받도록 구성
3. **테스트**: 각 단계 완료 후 import 테스트 및 linter 확인
4. **하위 호환성**: 기존 코드와의 호환성 유지

## 예상 소요 시간

- 약 1-2시간

## 작업 체크리스트

### preview.py 리팩토링
- [ ] `preview_ui.py` 파일 생성 및 `_create_preview_ui` 메서드 추출
- [ ] `preview_original.py` 파일 생성 및 `show_original_preview` 메서드 추출
- [ ] `preview_edited.py` 파일 생성 및 `show_edited_preview` 메서드 추출
- [ ] `preview_regions.py` 파일 생성 및 영역 표시 메서드 추출
- [ ] `preview.py`의 `PreviewManagerMixin` 리팩토링
- [ ] import 경로 수정
- [ ] 테스트 및 검증
- [ ] linter 오류 확인 및 수정

## 완료 기준

1. 모든 메서드가 정상적으로 import됨
2. linter 오류 없음
3. 기능 테스트 통과
4. 파일 크기가 적절한 수준으로 감소 (각 파일 300줄 이하)
