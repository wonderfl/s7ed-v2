# 작업 계획서: 팔레트 이미지 PNG 및 파라미터 삭제 기능 추가

**작업 일시**: 2026-01-09 21:36  
**작업 목표**: 팔레트 이미지 PNG 저장 버튼 옆에 삭제 버튼 추가, PNG 파일과 파라미터 파일을 함께 삭제하는 기능 구현

## 작업 배경
- 현재 팔레트 이미지를 PNG로 저장하는 버튼은 있지만 삭제 버튼이 없음
- 저장된 PNG 파일과 파라미터 파일을 삭제할 수 있는 기능이 필요함
- 파라미터 파일이 없을 때는 삭제 버튼을 비활성화해야 함

## 작업 순서

### 1단계: 삭제 함수 구현
- [x] `gui/_face_extract_save.py`에 `delete_png()` 함수 추가
  - PNG 파일 경로 계산 (save_png()와 동일한 로직 사용)
  - 파라미터 파일 경로 계산 (`{image_path}.s7ed.json`)
  - 두 파일 존재 여부 확인
  - 삭제 확인 대화상자 표시
  - 파일 삭제 실행
  - 파라미터 상태 라벨 업데이트

### 2단계: UI에 삭제 버튼 추가
- [x] `gui/_face_extract.py`의 `_create_preview_ui()` 함수 수정
  - "PNG 저장" 버튼 옆에 "삭제" 버튼 추가
  - 버튼을 인스턴스 변수로 저장 (`self.btn_delete_png`)

### 3단계: 버튼 상태 관리 로직 추가
- [x] `gui/_face_extract_params.py`의 `_load_image_params()` 함수 수정
  - 파라미터 파일 존재 여부에 따라 삭제 버튼 활성화/비활성화
  - `hasattr(self, 'btn_delete_png')` 체크 후 상태 업데이트
- [x] `gui/_face_extract_save.py`의 `delete_png()` 함수에서 삭제 후 버튼 상태 업데이트

### 4단계: 초기 상태 설정
- [x] `gui/_face_extract.py`에서 이미지 로드 시 삭제 버튼 상태 초기화
  - `load_image()` 또는 관련 함수에서 파라미터 존재 여부 확인 후 버튼 상태 설정

## 구현 세부사항

### 삭제 함수 동작
1. 현재 이미지 경로 확인
2. PNG 파일 경로 계산 (save_png()와 동일)
3. 파라미터 파일 경로 계산
4. 두 파일 중 하나라도 존재하면 확인 대화상자 표시
5. 확인 시 존재하는 파일만 삭제
6. 삭제 후 파라미터 상태 라벨 및 버튼 상태 업데이트

### 버튼 상태 관리
- 파라미터 파일이 존재하면 버튼 활성화
- 파라미터 파일이 없으면 버튼 비활성화
- 이미지 로드 시마다 상태 업데이트
- 삭제 후 상태 업데이트
