# 작업 계획서: morph_face_by_polygons 함수 리팩토링

## 작업 목표
기존  `morph_face_by_polygons` 함수를 여러 헬퍼 함수로 나누어 가독성과 유지보수성을 개선합니다.

## 작업 계획

1. **입력 검증 및 전처리**
   - 사용 함수: `_validate_and_prepare_inputs`
   - 설명: 입력값을 검증하고 전처리합니다.
   - 체크리스트:
     - [x] PIL.Image 객체 확인
     - [x] 랜드마크 리스트 확인

2. **눈동자 포인트 처리**
   - 사용 함수: `_prepare_iris_centers`
   - 설명: 눈동자 포인트를 처리하고 중앙 포인트를 마련합니다.
   - 체크리스트:
     - [x] 눈동자 인덱스 가져오기
     - [x] 중앙 포인트 계산

3. **Delaunay 삼각형 생성**
   - 사용 함수: `_create_delaunay_triangulation`
   - 설명: 랜드마크 포인트로부터 Delaunay 삼각형을 생성합니다.
   - 체크리스트:
     - [x] 캐시 확인
     - [x] 삼각형 생성 및 저장

4. **뒤집힌 삼각형 수정**
   - 사용 함수: `_check_and_fix_flipped_triangles`
   - 설명: 뒤집힌 삼각형이 있는지 검증하고 수정합니다.
   - 체크리스트:
     - [x] 뒤집힌 삼각형 경고 출력
     - [x] 문제 포인트 복원

5. **바운딩 박스 계산**
   - 사용 함수: `_calculate_landmark_bounding_box`
   - 설명: 랜드마크의 바운딩 박스를 계산합니다.
   - 체크리스트:
     - [x] 랜드마크 유효성 확인
     - [x] 바운딩 박스 좌표 저장

6. **픽셀 변형 처리**
   - 사용 함수: `_apply_pixel_transformation`, `_scale_image`, `_map_pixels`, `_perform_interpolation`, `_fill_empty_spaces`
   - 설명: 이미지의 픽셀을 변형합니다.
   - 체크리스트:
     - [x] 픽셀 매핑 확인
     - [x] 보간 처리 확인
     - [x] 빈 공간 채우기 확인

7. **디버깅 및 로깅**
   - 설명: 처리 과정에서 로깅을 통해 흐름을 추적합니다.
   - 체크리스트:
     - [x] 로그 메시지 확인

8. **테스트 작성**
   - 설명: 각 헬퍼 함수에 대한 유닛 테스트를 작성합니다.
   - 체크리스트:
     - [x] 모든 헬퍼 함수에 대한 테스트 작성

9. **통합 테스트**
   - 설명: 전체 흐름을 검증하는 통합 테스트를 실시합니다.
   - 체크리스트:
     - [x] 전체 프로그램 흐름 점검