# 얼굴 편집 패널 UI 개선 작업 계획서

## 작업 목표
얼굴 편집 패널의 UI를 개선하여 사용성을 향상시키고, 원본과 편집본을 더 쉽게 비교할 수 있도록 함

## 현재 문제점 분석

### 1. 레이아웃 문제
- 원본 이미지가 200x250 썸네일로만 표시되어 너무 작음
- 편집본은 600x750으로 크게 표시되어 크기 차이가 큼
- 좌-중-우 레이아웃으로 인해 좁은 화면에서 비효율적
- 원본과 편집본 비교가 어려움

### 2. UI 요소 문제
- 확대/축소 버튼이 원본 썸네일과 편집본에 각각 있어 중복됨
- 설정 패널이 우측에 있어 좁을 수 있음
- 파일 선택 UI가 상단에 작게 배치되어 있음

### 3. 사용성 문제
- 원본 이미지를 크게 볼 수 없음
- 원본과 편집본을 동시에 비교하기 어려움
- 확대/축소 기능이 분산되어 있어 혼란스러움

## 개선 방안 제안

### 방안 1: 상하 분할 레이아웃 (추천)
- **상단**: 파일 선택 UI (기존 유지)
- **중앙**: 원본과 편집본을 좌우로 나란히 같은 크기로 표시 (비교 모드)
- **하단**: 편집 설정 패널 (넓게 확보)
- **장점**: 원본과 편집본을 쉽게 비교 가능, 설정 패널이 넓어져 사용 편리
- **단점**: 세로 공간이 많이 필요

### 방안 2: 탭 전환 방식
- **상단**: 파일 선택 UI
- **중앙**: 원본/편집본 탭으로 전환 가능
- **우측**: 편집 설정 패널
- **장점**: 각 이미지를 크게 볼 수 있음
- **단점**: 동시 비교가 어려움

### 방안 3: 하이브리드 방식 (추천)
- **상단**: 파일 선택 UI
- **중앙**: 원본과 편집본을 좌우로 나란히 표시 (비교 모드)
  - 각각 독립적인 확대/축소 가능
  - 동기화 확대/축소 옵션 제공
- **하단**: 편집 설정 패널 (스크롤 가능)
- **장점**: 비교와 상세 보기 모두 가능, 유연함

## 선택된 방안: 사용자 요청 레이아웃 (최종 수정)

### 최종 레이아웃 구조
- **메인 창**:
  - **좌측**: 원본 이미지 (크게 표시, 리사이즈 가능)
  - **우측**: 편집본 프리뷰 (크게 표시, 리사이즈 가능)
  - **상단**: "파일 선택" 버튼, "편집 설정" 버튼
- **팝업창 1**: 파일 리스트 팝업 (Toplevel)
- **팝업창 2**: 편집 설정 패널 팝업 (Toplevel)

## 작업 단계

### 1단계: 레이아웃 구조 변경 (수정 필요)
- [x] `create_widgets()` 메서드 수정
  - 좌측: 원본 이미지 (크게, 리사이즈 가능)
  - 우측: 편집본 프리뷰 (크게, 리사이즈 가능)
  - 상단: "파일 선택" 버튼, "편집 설정" 버튼
- [x] 원본 이미지 썸네일 제거하고 정식 캔버스로 변경 (크게)
- [x] 편집본 프리뷰 창을 하단에서 제거하고 우측으로 이동
- [x] 설정 패널을 메인 창에서 제거
- [x] 파일 리스트를 메인 창에서 제거

### 2단계: 확대/축소 기능 개선
- [x] 원본 이미지 확대/축소 기능 유지
- [x] 편집본 프리뷰 확대/축소 기능 추가 (zoom_in_edited, zoom_out_edited, zoom_reset_edited)
- [x] 각 캔버스에 확대/축소 버튼 배치
- [x] 마우스 휠 확대/축소는 각 캔버스에서 독립적으로 작동

### 3단계: 설정 패널 유지
- [x] 설정 패널은 기존 그대로 유지 (우측 상단)
- [x] 탭 구조 유지

### 4단계: 미리보기 업데이트 메서드 수정
- [x] `show_original_thumbnail()` 제거, `show_original_preview()` 사용
- [x] 원본 이미지도 편집본과 동일한 방식으로 표시
- [x] 랜드마크, 영역 표시 등이 원본에도 적용되도록 수정 (기존 기능 유지)

### 5단계: 이벤트 핸들러 업데이트
- [x] 원본 캔버스 드래그 이벤트 추가
- [x] 원본 캔버스 확대/축소 이벤트 추가
- [x] 편집본 마우스 휠 이벤트 추가

### 7단계: 팝업창 구현 (신규)
- [x] 파일 리스트 팝업창 구현
  - Toplevel로 별도 창 생성
  - "파일 선택" 버튼 클릭 시 열기
  - 기존 파일 선택 UI를 팝업창에 배치
  - 팝업창 닫기 시 리소스 정리
- [x] 편집 설정 패널 팝업창 구현
  - Toplevel로 별도 창 생성
  - "편집 설정" 버튼 클릭 시 열기
  - 기존 설정 패널 UI를 팝업창에 배치
  - 팝업창 크기 및 위치 설정
  - 팝업창 닫기 시 리소스 정리

### 6단계: 테스트 및 검증
- [ ] 레이아웃이 올바르게 표시되는지 확인 (사용자 테스트 필요)
- [ ] 원본과 편집본이 나란히 잘 보이는지 확인
- [ ] 파일 리스트 팝업창이 정상적으로 열리고 닫히는지 확인
- [ ] 편집 설정 팝업창이 정상적으로 열리고 닫히는지 확인
- [ ] 각 팝업창에서 기능이 정상 작동하는지 확인
- [ ] 리사이즈 기능이 정상 작동하는지 확인

## 예상 변경 파일
- `gui/face_edit/__init__.py`: 메인 레이아웃 변경 (좌우 분할, 팝업 버튼 추가)
- `gui/face_edit/file.py`: 파일 리스트 팝업창 클래스 추가 또는 수정
- `gui/face_edit/morphing.py`: 편집 설정 팝업창 클래스 추가 또는 수정 (또는 새 파일)

## 주의사항
- 기존 기능은 모두 유지되어야 함
- Mixin 구조는 그대로 유지
- 랜드마크 표시, 영역 표시 등 기존 기능 정상 작동 확인
