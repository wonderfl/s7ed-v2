---
name: edited_image_save_feature_plan_in_panel
overview: 이 계획은 얼굴 편집 패널에서 수정된 이미지를 별도의 파일로 저장하는 기능을 패널 내에 직접 추가하는 것을 목표로 합니다. 사용자는 편집 완료 후 패널의 버튼을 통해 이미지를 PNG 또는 JPG 형식으로 저장할 수 있습니다.
todos:
  - id: implement_save_function_in_panel
    content: "`gui/face_edit/file.py`에 `save_edited_image` 함수 구현"
    status: pending
  - id: add_save_button_to_panel
    content: "얼굴 편집 패널에 저장 버튼 추가 및 연결"
    status: pending
  - id: adjust_eye_scale
    content: "`gui/face_edit/polygon_renderer/all_tab_drawer.py`의 `draw_iris` 함수에서 `center_radius` 스케일 조정 (선택 사항)"
    status: completed
---

# 편집된 이미지 저장 기능 추가 계획 (얼굴 편집 패널 내)

## 개요
이 계획은 얼굴 편집 패널에서 수정된 이미지를 별도의 파일로 저장하는 기능을 패널 내에 직접 추가하는 것을 목표로 합니다. 사용자는 편집 완료 후 패널의 버튼을 통해 이미지를 PNG 또는 JPG 형식으로 저장할 수 있습니다.

## 상세 계획

### 1. `gui/face_edit/file.py` 에 `save_edited_image` 함수 구현
`gui/face_edit/file.py` 파일에 `save_edited_image` 함수를 구현합니다. 이 함수는 다음 로직을 포함합니다.
*   `self.edited_image` (편집 패널의 이미지 객체)를 인자로 받거나, `self` 인스턴스에서 직접 접근합니다.
*   `filedialog.asksaveasfilename`을 사용하여 사용자에게 저장할 파일 경로를 묻습니다. 이때 `.png`, `.jpg` 등 이미지 파일 형식을 제안합니다.
*   가져온 이미지 데이터를 지정된 경로에 저장합니다. `PIL` (Pillow) 라이브러리의 `Image.save()` 메서드를 사용합니다.

### 2. 얼굴 편집 패널 (`gui/face_edit/face_edit_panel.py` 또는 유사 파일)에 저장 버튼 추가
얼굴 편집 패널 (예: `gui/face_edit/face_edit_panel.py` 또는 `show_face_edit_panel_v2`를 호출하는 부분) 내에 "Save Edited Image" 버튼을 추가합니다. 이 버튼은 `gui/face_edit/file.py`에 구현된 `save_edited_image` 함수를 호출하도록 연결합니다.

### 3. `gui/face_edit/polygon_renderer/all_tab_drawer.py` 눈동자 크기 스케일 조정 (선택 사항)
눈동자 표시가 화면 스케일에 따라 다르게 보이는 문제를 해결하기 위해, `draw_iris` 함수 내의 `center_radius`를 `scale_x`, `scale_y`와 같은 스케일 팩터에 비례하여 조정하는 로직을 유지합니다. (이 부분은 이전 계획과 동일하게 유지됩니다.)

```375:385:gui/face_edit/polygon_renderer/all_tab_drawer.py
                    center_radius = 8
                    center_id = canvas.create_oval(
                        canvas_x - center_radius,
                        canvas_y - center_radius,
                        canvas_x + center_radius,
                        canvas_y + center_radius,
                        fill="yellow",
                        outline="red",
                        width=2,
                        tags=("landmarks_polygon", f"iris_center_{iris_side}")
```

## To-Do List (체크리스트)

- [ ] `gui/face_edit/file.py`에 `save_edited_image` 함수 구현
- [ ] 얼굴 편집 패널에 저장 버튼 추가 및 연결
- [x] `gui/face_edit/polygon_renderer/all_tab_drawer.py`의 `draw_iris` 함수에서 `center_radius` 스케일 조정 (선택 사항)
- [x] `specs` 폴더에 작업 계획서 생성 (파일명 `taskYYMMDD_HHmm.md` 형식 준수)
