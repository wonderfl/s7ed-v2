# 작업 계획서: 이미지 조정 기능 추가 및 UI 개선

## 작업 목표
1. 다음 5개의 이미지 조정 기능을 추가합니다:
   - 감마 보정 (Gamma Correction) - 범위: 0.5 ~ 2.0
   - Vibrance (비브런스) - 범위: 0.0 ~ 2.0
   - Clarity (명확도) - 범위: -100 ~ +100
   - Dehaze (안개 제거) - 범위: -100 ~ +100
   - 틴트 (Tint) - 범위: -150 ~ +150

2. 이미지 미리보기 레이아웃 변경:
   - 현재: 3개 (원본, 추출된 얼굴, 팔레트 적용)
   - 변경: 4개 (원본, 추출 원본, 추출 조정, 팔레트 적용)
   - 이미지 크기: 288x360으로 변경 (현재: 384x480)

## 작업 단계

### 1. 변수 추가
- `gui/_face_extract.py`의 `__init__` 메서드에 다음 변수 추가:
  - `self.gamma = tk.DoubleVar(value=1.0)`  # 감마 보정 (0.5 ~ 2.0)
  - `self.vibrance = tk.DoubleVar(value=1.0)`  # 비브런스 (0.0 ~ 2.0)
  - `self.clarity = tk.DoubleVar(value=0.0)`  # 명확도 (-100 ~ +100)
  - `self.dehaze = tk.DoubleVar(value=0.0)`  # 안개 제거 (-100 ~ +100)
  - `self.tint = tk.DoubleVar(value=0.0)`  # 틴트 (-150 ~ +150)

### 2. 이미지 미리보기 레이아웃 변경
- `create_widgets()` 메서드의 미리보기 섹션 수정
- 4개 캔버스로 변경:
  - 원본 이미지 (288x360)
  - 추출 원본 (288x360) - 조정 전 추출 이미지
  - 추출 조정 (288x360) - 조정 후 추출 이미지
  - 팔레트 적용 (288x360)
- `show_extracted_preview()` 함수 분리:
  - `show_extracted_original()`: 조정 전 추출 이미지 표시
  - `show_extracted_adjusted()`: 조정 후 추출 이미지 표시

### 3. 슬라이더 UI 추가
- `create_widgets()` 메서드의 "이미지 조정" 섹션에 슬라이더 추가
- 슬라이더 배치 (3개씩 한 줄, 관련 기능끼리 그룹화):
  - 1줄: 밝기, 감마, 노출 (밝기 관련)
  - 2줄: 대비, 선명도, Clarity (대비/선명도 관련)
  - 3줄: Dehaze, 평탄화, (빈 공간)
  - 4줄: 채도, Vibrance, 색조 (색상 관련)
  - 5줄: 색온도, 틴트, (빈 공간)
- 슬라이더 길이: 300px 유지 (이미지 크기 변경으로 패널 너비가 충분함)
- **슬라이더 라벨을 영어로 변경:**
  - 밝기 → Brightness
  - 평탄화 → Equalize
  - 대비 → Contrast
  - 선명도 → Sharpness
  - 채도 → Saturation
  - 색온도 → Color Temp
  - 색조 → Hue
  - 노출 → Exposure
  - 감마 → Gamma
  - Vibrance → Vibrance
  - Clarity → Clarity
  - Dehaze → Dehaze
  - 틴트 → Tint

### 4. 이미지 처리 로직 추가
- `show_extracted_original()` 메서드: 조정 전 추출 이미지 표시 (288x360)
- `show_extracted_adjusted()` 메서드: 조정 후 추출 이미지 표시 (288x360)
  - 각 조정 기능 적용 로직 추가
- `update_palette_preview()` 메서드에 각 조정 기능 적용 로직 추가
- 처리 순서는 기존 순서를 유지하되, 새로운 기능들을 적절한 위치에 삽입

### 5. 라벨 업데이트 로직 추가
- `on_adjust_change()` 메서드에 각 슬라이더 값 표시 로직 추가

### 6. 초기화 로직 추가
- `reset_adjustments()` 메서드에 새로운 변수들의 기본값 설정 추가

## 구현 세부사항

### 감마 보정 (Gamma Correction)
- 공식: `output = 255 * (input / 255) ^ (1 / gamma)`
- gamma = 1.0: 원본 유지
- gamma < 1.0: 중간 톤 밝게 (밝은 부분 더 밝게)
- gamma > 1.0: 중간 톤 어둡게 (어두운 부분 더 어둡게)

### Vibrance (비브런스)
- 채도와 유사하지만 피부톤 등 자연스러운 색상은 덜 강조
- 구현: HSV 색공간에서 S 채널을 조정하되, 피부톤 범위는 덜 조정

### Clarity (명확도)
- 중간 톤 대비 강조
- 구현: Unsharp Mask 필터 사용 (선명도와 유사하지만 중간 톤에 특화)

### Dehaze (안개 제거)
- 흐림/안개 효과 제거, 대비 향상
- 구현: 대비 향상 + 약간의 선명도 향상

### 틴트 (Tint)
- 녹색/마젠타 축 조정
- 양수(마젠타): 빨강/파랑 증가, 초록 감소
- 음수(녹색): 초록 증가, 빨강/파랑 감소

## 체크리스트
- [x] 변수 추가 완료
- [x] 이미지 미리보기 레이아웃 변경 완료 (4개로 변경, 288x360)
- [x] 추출 이미지 표시 함수 분리 완료 (원본/조정)
- [x] 슬라이더 UI 추가 완료 (3개씩 배치)
- [x] 슬라이더 라벨 영어로 변경 완료
- [x] 감마 보정 처리 로직 추가 완료
- [x] Vibrance 처리 로직 추가 완료
- [x] Clarity 처리 로직 추가 완료
- [x] Dehaze 처리 로직 추가 완료
- [x] 틴트 처리 로직 추가 완료
- [x] 라벨 업데이트 로직 추가 완료
- [x] 초기화 로직 추가 완료
- [ ] 테스트 완료 (사용자 확인 필요)

