# 작업 계획서: 얼굴 특징 보정 프레임 탭 구조 추가

**작업 일시**: 2026-01-13 15:23  
**작업 목표**: 얼굴 특징 보정 프레임에 탭을 추가하여 눈, 코, 입, 윤곽을 각각 선택해서 편집할 수 있도록 개선  
**완료 일시**: 2026-01-13  
**테스트 완료**: 2026-01-13 (모든 기능 정상 작동 확인)

## 작업 배경
- 현재 얼굴 특징 보정 프레임에는 모든 편집 옵션이 하나의 프레임에 표시되어 있음
- 편집 옵션이 많아져서 UI가 복잡하고 사용자가 원하는 부분을 찾기 어려움
- 탭 구조로 분리하면 사용자가 원하는 편집 항목을 쉽게 찾을 수 있음

## 작업 순서

### 1단계: 탭 구조 설계 ✅
- [x] `_create_face_morphing_ui` 메서드 수정
  - ttk.Notebook 위젯 추가 완료
  - 4개의 서브 탭 생성: 눈, 코, 입, 윤곽 완료
  - 각 탭에 해당하는 편집 옵션 분리 완료
  - 메인 탭 노트북에 "얼굴 특징 보정", "스타일 전송", "나이 변환" 추가 완료

### 2단계: 눈 탭 구현 ✅
- [x] 눈 탭 프레임 생성 완료
- [x] 눈 관련 편집 옵션 이동 완료
  - 왼쪽/오른쪽 눈 크기 슬라이더 완료
  - ~~개별 조정 체크박스~~ → **"개별 적용"으로 통합** (얼굴 정렬 섹션으로 이동)
  - 눈 위치 조정 (수직/수평) 완료
  - ~~눈 간격 조정 체크박스~~ → **얼굴 정렬 섹션으로 이동**
  - ~~눈 영역 표시 옵션~~ → **얼굴 정렬 섹션으로 이동**
  - 눈 영역 크기 조절 슬라이더 완료

### 3단계: 코 탭 구현 ✅
- [x] 코 탭 프레임 생성 완료
- [x] 코 크기 슬라이더 이동 완료

### 4단계: 입 탭 구현 ✅
- [x] 입 탭 프레임 생성 완료
- [x] 입 관련 편집 옵션 추가 (현재는 없지만 향후 확장 가능하도록 구조만 생성) 완료
- [x] 플레이스홀더 메시지 표시 ("입 편집 기능은 추후 추가 예정") 완료

### 5단계: 윤곽 탭 구현 ✅
- [x] 윤곽 탭 프레임 생성 완료
- [x] 윤곽 관련 편집 옵션 이동 완료
  - 턱선 조정 슬라이더 완료
  - 얼굴 너비 슬라이더 완료
  - 얼굴 높이 슬라이더 완료

### 6단계: 초기화 버튼 위치 조정 ✅
- [x] 초기화 버튼을 탭 외부 상단에 배치 (모든 탭의 설정을 초기화) 완료
- [ ] 각 탭 내부에 개별 초기화 버튼 추가 (선택적 - 미구현)

### 7단계: 테스트 및 검증 ✅
- [x] 각 탭 전환 시 편집 옵션이 정상적으로 표시되는지 확인 완료
- [x] 각 편집 옵션이 정상적으로 작동하는지 확인 완료
- [x] 초기화 버튼이 모든 탭의 설정을 초기화하는지 확인 완료

## 추가 완료된 작업

### 8단계: 코드 리팩토링 ✅
- [x] `_face_edit.py` 파일을 Mixin 패턴으로 모듈화 완료
- [x] `gui/face_edit/` 디렉토리 구조로 재구성 완료
  - `file.py`: FileManagerMixin
  - `preview.py`: PreviewManagerMixin
  - `canvas.py`: CanvasEventHandlerMixin
  - `morphing.py`: MorphingManagerMixin
  - `style.py`: StyleManagerMixin
  - `age.py`: AgeManagerMixin
  - `__init__.py`: FaceEditPanel (모든 Mixin 상속)

### 9단계: 얼굴 정렬 섹션 UI 개선 ✅
- [x] "개별 적용" 체크박스를 얼굴 정렬 섹션으로 이동 완료
- [x] "개별 적용" 체크박스가 눈 크기/위치/영역 모두를 통합 제어하도록 변경 완료
- [x] "눈 영역 표시" 체크박스를 자동 정렬 아래로 이동 완료
- [x] "눈 간격 조정" 체크박스를 눈 영역 표시 아래로 이동 완료
- [x] "개별 적용" 체크박스를 눈 영역 표시 위로 배치 완료

### 10단계: 메인 탭 구조 확장 ✅
- [x] "스타일 전송" 기능을 메인 탭으로 추가 완료
- [x] "나이 변환" 기능을 메인 탭으로 추가 완료

### 11단계: 코드 정리 및 최적화 ✅
- [x] 사용되지 않는 변수 제거 (`use_individual_eyes`) 완료
- [x] 중복 초기화 코드 제거 (`reset_morphing` 메서드) 완료
- [x] 린터 오류 확인 및 수정 완료

## 기술 사항
- ttk.Notebook 위젯 사용 (tkinter.ttk 모듈)
- 기존 편집 로직은 변경하지 않고 UI 구조만 변경
- 각 탭은 독립적인 프레임으로 구성
- 초기화 버튼은 모든 탭의 설정을 초기화하도록 유지
- Mixin 패턴을 사용한 모듈화로 코드 유지보수성 향상

## 최종 UI 구조

```
얼굴 정렬 섹션 (탭 외부)
├── [자동 정렬 (랜드마크 기반)] (사용 가능)
├── [개별 적용] ← 눈 크기/위치/영역 통합 제어
├── [눈 영역 표시]
└── [눈 간격 조정]

메인 탭 노트북
├── 얼굴 특징 보정
│   ├── 눈 탭
│   │   ├── 왼쪽/오른쪽 눈 크기 슬라이더
│   │   ├── 왼쪽/오른쪽 눈 수직 위치 슬라이더
│   │   ├── 왼쪽/오른쪽 눈 수평 위치 슬라이더
│   │   └── 왼쪽/오른쪽 눈 영역 크기/위치 슬라이더
│   ├── 코 탭
│   │   └── 코 크기 슬라이더
│   ├── 입 탭
│   │   └── 플레이스홀더 메시지
│   └── 윤곽 탭
│       ├── 턱선 조정 슬라이더
│       ├── 얼굴 너비 슬라이더
│       └── 얼굴 높이 슬라이더
├── 스타일 전송
│   ├── 스타일 이미지 선택
│   ├── 색상 전송 강도 슬라이더
│   └── 텍스처 전송 강도 슬라이더
└── 나이 변환
    └── 나이 조정 슬라이더
```

## 주의 사항
- 기존 편집 기능의 동작은 변경하지 않음
- 눈 편집의 복잡한 로직(동기화, 개별 적용 등)은 그대로 유지
- 입 편집 기능은 현재 없지만 향후 확장을 위해 탭 구조만 미리 생성
- "개별 적용" 체크박스는 눈 크기, 눈 위치, 눈 영역 모두를 통합 제어
