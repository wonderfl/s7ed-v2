"""현재 Delaunay 매핑 방식 확인"""
print("=" * 80)
print("현재 Delaunay Triangulation 매핑 방식 분석")
print("=" * 80)

print("\n[1단계: 포인트 배열 구성]")
print("원본 랜드마크: 478개 (인덱스 0-477)")
print("  - 0-467: 기본 랜드마크")
print("  - 468: 왼쪽 중심점")
print("  - 469-472: 오른쪽 contour")
print("  - 473: 오른쪽 중심점")
print("  - 474-477: 왼쪽 contour")

print("\n[2단계: 제거 및 추가]")
print("제거: contour 8개 (469-472, 474-477)")
print("유지: 0-468, 473 (총 470개)")
print("추가: 중앙 포인트 2개 (계산된 좌표)")
print("최종: 470 + 2 = 472개")

print("\n[3단계: Delaunay 배열 구성]")
print("original_points_array = [")
print("  인덱스 0-467: 원본 인덱스 0-467 (그대로)")
print("  인덱스 468: 원본 인덱스 468 (왼쪽 중심점)")
print("  인덱스 469: 원본 인덱스 473 (오른쪽 중심점)")
print("  인덱스 470: 추가된 왼쪽 중앙 포인트 (계산)")
print("  인덱스 471: 추가된 오른쪽 중앙 포인트 (계산)")
print("  인덱스 472-475: 경계 포인트 4개")
print("]")

print("\n[4단계: 삼각형 변환]")
print("simplex = [i0, i1, i2]  # Delaunay 배열 인덱스")
print("pt1_orig = original_points_array[simplex[0]]")
print("pt1_trans = transformed_points_array[simplex[0]]")
print("\n**매핑 테이블 없음!**")
print("simplex 인덱스는 Delaunay 배열 인덱스를 그대로 사용")

print("\n[문제점]")
print("1. 원본 인덱스와 Delaunay 배열 인덱스가 다름")
print("   - 원본 인덱스 468 -> Delaunay 배열 인덱스 468 (그대로)")
print("   - 원본 인덱스 473 -> Delaunay 배열 인덱스 469 (1 감소)")
print("   - 추가된 중앙 포인트 -> Delaunay 배열 인덱스 470, 471")
print("\n2. 삼각형이 원본 인덱스 468, 473을 참조하면:")
print("   - Delaunay 배열 인덱스 468, 469를 사용")
print("   - 하지만 이건 원본 인덱스 468, 473과 같음 (다행!)")
print("\n3. 삼각형이 추가된 중앙 포인트를 참조하면:")
print("   - Delaunay 배열 인덱스 470, 471를 사용")
print("   - 이건 원본 인덱스에 없음 (새로 추가된 것)")

print("\n[결론]")
print("현재 방식은 매핑 테이블 없이 작동하지만:")
print("- 원본 인덱스 468, 473이 제거되지 않으면 문제 없음")
print("- 원본 인덱스 468, 473이 제거되면 인덱스가 밀려서 문제 발생!")
print("\n확인 필요: iris_indices에 468, 473이 포함되는가?")
